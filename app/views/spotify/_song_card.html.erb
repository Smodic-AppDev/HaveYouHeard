<div class="card mb-3 px-0" style="width: 18rem;">
  
  <%= image_tag a_track.album.images.at(-2).fetch("url"), class: "card-img-top", alt: "Card image cap" %>
                  
  <div class="card-img-overlay">
      <h1 class="text-right">
        <% if a_track.preview_url.nil? %>
          <!-- Intentionally blank -->
        <% else %>
          <%= link_to a_track.preview_url, class: "text-light" do %>
            <i class="far fa-play-circle"></i>
          <% end %>
        <% end %>
      </h1>
  </div>
  
  <div class="card-body">    
    
    <%= link_to song_details_path(a_track.id), class: "card-title card-link font-weight-bold" do %>
      <%= truncate(a_track.name, length: 30) %>
    <% end %>
        
    <p class="card-text">by <%= truncate(a_track.artists.first.name, length: 35) %></p>

    <div>
      <% like = current_user.likes.find_by(song_id: a_track.id) %>
      <% if like.nil? %>

        <%= render "likes/who_likes", a_track: a_track %>
        
        <%= render "likes/form", like: current_user.likes.build(song_id: a_track.id) %>

      <% else %>  

        <%= render "likes/who_else_likes", a_track: a_track %>        
        
        <%= link_to like, class: "btn btn-link card-link pull-right", method: :delete do %>
          <i class="fas fa-heart fa-fw"></i>
          Unlike
        <% end %>
        
        
      <% end %>
    </div>
  </div>
</div>